<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.8/angular.min.js"></script>
<style> .ng-cloak { display: none !important; } </style>
<script>
/*$(document).ready(function(){
        $.getJSON("kysymykset.JSON", function(result){
            $.each(result, function(i, field){
                $("form").append(field.id + ".  " +field.kysymys + "<br/>").append("<input name="+field.id+"/><br/>");
            });
        });
        $('#vastauslomake').on('submit', function(e) { 
            var inputs = $("#vastauslomake :input:not(:submit)");
            e.preventDefault();
            var vastaukset = $.map(inputs, function(x, y) {
                		return {
                        	id: x.name,
                        	vastaus: $(x).val()
                    };
                });
            console.log(vastaukset);
            $.ajax({
                url: 'talletavastaus', // php script to retern json encoded string
                data:JSON.stringify(vastaukset),  // serialized data to send on server
                contentType: "application/json; charset=utf-8",
                dataType:'json', // set recieving type - JSON in case of a question
                type:'POST', // set sending HTTP Request type
                success: function (data) {
                	console.log(data)
                	$("#response pre").html("Vastaukset tallennetu! Kiitos!")
                	$('#vastauslomake')[0].reset();
                	
                },
                error: function (err) {
                	console.log("jotain meni pieleen: katso virhe alta:")
                	$("#response pre").html("jotain meni pieleen!")
                	console.log(err)	
                }
            });
            
            });
 
       
});*/
</script>
</head>
<body>
<!--  <div id="response">
<pre></pre>
</div>
<form id="vastauslomake">

<input type="submit" id="submit" value="Submit"/><br/>
</form> -->
<div ng-app="myApp" ng-controller="myCtrl">

<form  name="lomake"  ng-submit="submitForm()" >

  <div  class="form-group " ng-repeat="kysymys in myWelcome" >
  
    <label >{{ kysymys.id }}. {{ kysymys.kysymys }}</label>
    <br/>
    <input type="text" class="form-control" name="{{ kysymys.id }}" />
    <br/>
    <p class="help-block" ng-show="userForm.email.$invalid">Valid Email Address Required</p>
  </div>
	<button type="submit" class="btn btn-primary">Submit</button>
</form>

</div>

<script>
var app = angular.module('myApp', []);
app.controller('myCtrl', function($scope, $http) {
  $http.get("kysymykset.JSON")
  .then(function(response) {
      $scope.myWelcome = response.data;
  });
  $scope.submitForm=function(){
   
      var data=$scope.vastaus;  
      console.log(data);
      /* post to server*/
      $http.post('talletavastaus', data);        
  }
});

</script>
</body>
</html>